<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2.min.js"></script>

        <script>
            R1 = 330; //радиус основной окружности, окружности интерпретации (инверсии)
            Ox1 = 350;//начало координат по х, центр окружности инверсии
            Oy1 = 350;//начало координат по у
            n = 7;//начальное значение количества углов многоугольника
            r = 3;//начальное значение количества схождений многоугольников в вершинах
            R2 = 0;//начальное значение радиуса окружности ортогональной окружности инверсии и пересекающей оси под нужными углами альфа и бетта
            Ox2 = 0;//начальное значение центра ортогональной окружности по х
            Oy2 = 0;//начальное значение координаты центра окружности инверсии по у
            
            function calcCircule2(){
                a = Math.sin(Math.PI / r);//вычисляем синус альфа
                b = Math.cos(Math.PI / n);//вычисляем косинус бетта
                R2 = R1 / Math.sqrt(b * b - a * a);//вычисляем радиус окружности ортогональной окружности инверсии и пересекающей оси под нужными углами альфа и бетта
                Ox2 = Ox1 + R2 * b;//вычисляем центр ортогональной окружности по х
                Oy2 = Oy1 + R2 * Math.cos(Math.PI / r);//вычисляем центр ортогональной окружности по у
            }
            
            window.onload = function() {

                //создаём объект canvas
                drawingCanvas = document.getElementById('smile');
                if (drawingCanvas && drawingCanvas.getContext) {
                    ris = drawingCanvas.getContext('2d');
                }

                // Рисуем окружность (плоскость Лобачевского).
                ris.strokeStyle = "#000";
                ris.fillStyle = "#f0f0f0";
                ris.beginPath();
                ris.arc(Ox1, Oy1, R1, 0, Math.PI * 2, true);
                ris.closePath();
                ris.stroke();
                ris.fill();

                //рисуем оси координат
                ris.moveTo(Ox1, Oy1 - R1);
                ris.lineTo(Ox1, Oy1 + R1);
                ris.moveTo(Ox1 - R1, Oy1);
                ris.lineTo(Ox1 + R1, Oy1);
                ris.stroke();
                
                //привязываем обработчик нажатия на кнопку
                $("#draw").on("click", function() {
                    n = $("#n").val();//получаем значение количества углов многоугольника
                    r = $("#r").val();//получаем значение количества схождений многоугольников в вершинах
                    calcCircule2();
                    
                    //рисуем ортогональную окружность
                    ris.beginPath();
                    ris.arc(Ox2, Oy2, R2, 0, Math.PI * 2, true);
                    ris.stroke();
                });
            }
        </script>

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <h1>Разбиение Л2 в интерпретации Пуанкаре-II</h1>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.1.js"><\/script>')</script>

        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <form>
            <input style="width: 30px;" type="text" value="7" placeholder="Укажите количество углов" id="n">
            <label>- угольники, сходящиеся по </label>
            <input style="width: 30px;" type="text" value="3" placeholder="Укажите количество многоугольников сходящихся в каждой вершине" id="r">
            <input style="width: 130px; height: 33px;" type="button" value="Нарисовать" id="draw">
        </form>
        <canvas id="smile" width="700" height="700">
            <p>Ваш браузер не поддерживает рисование.</p>
        </canvas>
    </body>
</html>
